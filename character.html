<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Character Movement</title>
  <style>
    body {
      margin: 0;
      overflow: hidden; /* Prevent scrolling */
    }
    canvas {
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>
</head>
<body>
  <!-- Background Canvas -->
  <canvas id="background"></canvas>
  
  <!-- Character Canvas -->
  <canvas id="character"></canvas>

  <script>
    const characterCanvas = document.getElementById("character");
    const characterCtx = characterCanvas.getContext("2d");

    const backgroundCanvas = document.getElementById("background");
    const backgroundCtx = backgroundCanvas.getContext("2d");

    // Set canvas sizes to fill the screen
    characterCanvas.width = window.innerWidth;
    characterCanvas.height = window.innerHeight;
    backgroundCanvas.width = window.innerWidth;
    backgroundCanvas.height = window.innerHeight;

    // Character variables
    let characterX = 100; // Starting X position
    let characterY = characterCanvas.height - 160; // Starting Y position (on the grass)
    const characterWidth = 40;
    const characterHeight = 60;
    const speed = 5; // Speed of movement
    const jumpHeight = 100; // Height of jump
    let isJumping = false; // To track if the character is in the air
    let jumpVelocity = 0;

    // Load character sprite (already provided as a yellow block)
    const characterSprite = document.createElement("canvas");
    const spriteCtx = characterSprite.getContext("2d");
    characterSprite.width = characterWidth;
    characterSprite.height = characterHeight;

    spriteCtx.fillStyle = "#FFD700"; // Gold color for the character
    spriteCtx.fillRect(0, 0, characterWidth, characterHeight);

    // Event listener for key presses
    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft") {
        characterX -= speed;
      } else if (e.key === "ArrowRight") {
        characterX += speed;
      } else if (e.key === "ArrowUp" && !isJumping) {
        isJumping = true;
        jumpVelocity = -10;
      }
    });

    // Update character position
    function updateCharacter() {
      // Apply gravity when jumping
      if (isJumping) {
        characterY += jumpVelocity;
        jumpVelocity += 0.5; // Simulate gravity

        if (characterY >= characterCanvas.height - 100) { // Grass level
          characterY = characterCanvas.height - 100;
          isJumping = false; // End jump
        }
      }

      // Prevent character from moving off screen
      if (characterX < 0) characterX = 0;
      if (characterX + characterWidth > characterCanvas.width)
        characterX = characterCanvas.width - characterWidth;
    }

    // Render the character and update movement
    function renderCharacter() {
      characterCtx.clearRect(0, 0, characterCanvas.width, characterCanvas.height);

      // Draw the character
      characterCtx.drawImage(characterSprite, characterX, characterY, characterWidth, characterHeight);

      // Update character position
      updateCharacter();

      // Loop animation
      requestAnimationFrame(renderCharacter);
    }

    // Draw background
    function drawBackground() {
      backgroundCtx.fillStyle = "#87CEEB"; // Light blue sky
      backgroundCtx.fillRect(0, 0, backgroundCanvas.width, backgroundCanvas.height);

      const grassHeight = backgroundCanvas.height / 4; // Grass takes up the bottom quarter
      backgroundCtx.fillStyle = "#32CD32"; // Bright green grass
      backgroundCtx.fillRect(0, backgroundCanvas.height - grassHeight, backgroundCanvas.width, grassHeight);

      // Draw clouds
      const cloudShape = [
        [1],
        [1, 1, 1, 1, 1],
        [1, 1, 1, 1, 1, 1, 1],
        [1, 1, 1, 1, 1]
      ];

      function drawCloud(x, y) {
        backgroundCtx.fillStyle = "#FFFFFF"; // White color for clouds
        for (let i = 0; i < cloudShape.length; i++) {
          const row = cloudShape[i];
          const startX = x - Math.floor(row.length / 2) * 20;
          const startY = y + (i * 20);
          for (let j = 0; j < row.length; j++) {
            backgroundCtx.fillRect(startX + j * 20, startY, 20, 20);
          }
        }
      }

      drawCloud(100, 50);
      drawCloud(300, 100);
      drawCloud(600, 70);
      drawCloud(900, 150);
    }

    // Start the render loops
    function render() {
      drawBackground();
      renderCharacter();
    }

    render();
  </script>
</body>
</html>
